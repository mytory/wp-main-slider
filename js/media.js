(()=>{"use strict";jQuery((function(e){var i,t=e.trim(e("#_mytory_slider_image_ids").val()),a=0;function s(){e(".js-preview").html(""),_.each(e("#_mytory_slider_image_ids").val().split(","),(function(i){var t,a=wp.media.attachment(i);t=a.attributes.sizes.hasOwnProperty("thumbnail")?a.attributes.sizes.thumbnail.url:a.attributes.url,e("<img>",{src:t,style:"margin: 0 .5em .3em 0; width: 150px; height: 150px;",title:"편집하려면 사진 변경 버튼을 누르세요."}).appendTo(".js-preview")}))}function r(){e(".js-ing").remove(),e(".js-open-media").addClass("hidden"),e.trim(e("#_mytory_slider_image_ids").val())?e(".js-update-photo").removeClass("hidden"):e(".js-select-photo").removeClass("hidden")}function n(i){var t=_.pluck(i.toJSON(),"id").join(",");e("#_mytory_slider_image_ids").val(t),r(),s()}t?_.each(t.split(","),(function(i,t,n){wp.media.attachment(i).fetch().done((function(){++a==n.length&&(e(".js-open-media").attr("disabled",!1),r(),s())}))})):(r(),e(".js-open-media").attr("disabled",!1)),e(".js-open-media").click((function(){i||((i=wp.media.frames.assisiPhotoFrame=wp.media(function(){var i=[],t={frame:"post",state:"gallery-library"},a=e.trim(e("#_mytory_slider_image_ids").val());return a&&(_.each(a.split(","),(function(e){var t=wp.media.attachment(e);i.push(t)})),t.selection=new wp.media.model.Selection(i,{multiple:!0})),t}())).on("open",(function(){e.trim(e("#_mytory_slider_image_ids").val())&&i.setState("gallery-edit"),e(".describe").attr("placeholder","Link")})),i.on("update",n)),i.open()}))}))})();