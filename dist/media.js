jQuery((function(e){var t,i=e.trim(e("#image_ids").val()),a=0;function n(){e(".js-preview").html(""),_.each(e("#image_ids").val().split(","),(function(t){var i,a=wp.media.attachment(t);i=a.attributes.sizes.hasOwnProperty("thumbnail")?a.attributes.sizes.thumbnail.url:a.attributes.url,e("<img>",{src:i,style:"margin: 0 .5em .3em 0; width: 150px; height: 150px;",title:"편집하려면 사진 변경 버튼을 누르세요."}).appendTo(".js-preview")}))}function s(){e(".js-ing").remove(),e(".js-open-media").addClass("hidden"),e.trim(e("#image_ids").val())?e(".js-update-photo").removeClass("hidden"):e(".js-select-photo").removeClass("hidden")}function o(t){var i=_.pluck(t.toJSON(),"id").join(",");e("#image_ids").val(i),s(),n()}i?_.each(i.split(","),(function(t,i,o){wp.media.attachment(t).fetch().done((function(){++a===o.length&&(e(".js-open-media").attr("disabled",!1),s(),n())}))})):(s(),e(".js-open-media").attr("disabled",!1)),e(".js-open-media").click((function(){t||((t=wp.media.frames.assisiPhotoFrame=wp.media(function(){var t=[],i={frame:"post",state:"gallery-library"},a=e.trim(e("#image_ids").val());return a&&(_.each(a.split(","),(function(e){var i=wp.media.attachment(e);t.push(i)})),i.selection=new wp.media.model.Selection(t,{multiple:!0})),i}())).on("open",(function(){e.trim(e("#image_ids").val())&&t.setState("gallery-edit")})),t.on("update",o)),t.open(),e(document).on("mousemove",".media-modal",(t=>{e(".describe").attr("placeholder",window.mytory_slider_translation.link),e('[for="attachment-details-caption"]').text(window.mytory_slider_translation.link)}))}))}));